
<%- include('head', {pagetitle: 'Compare', id: 'compare'}) %> 

<nav>
    <ul class="flexbox">
        <%- include('logo') %>
        <%- include('logged-in', {loggedInUser: loggedInUser}) %>
        <%- include('useroperations', {loggedInUser: loggedInUser}) %>
    </ul>
</nav>

<%- include('title-container', {title: 'Spacecrafts comparison'}) %>

<main class="content">
    <div class="container">
        <div class="row buttons">
            <div class="col-12">
                <a class="btn btn-darks" href="/list">
                    Back to listing
                </a>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <div class="comparison-images-container flexbox">
                    <img id="<%= spacecraftA._id %>asd" class="new-layer comp-img" src="/assets/spacecrafts/<%= spacecraftA.imageName %>" onclick="showModalImage('<%= spacecraftA._id %>')"/>
                    <img id="<%= spacecraftB._id %>" class="new-layer comp-img" src="/assets/spacecrafts/<%= spacecraftB.imageName %>" onclick="showModalImage('<%= spacecraftB._id %>')"/>
                </div>
                <table>
                    <tr>
                        <th class="size-20">Property</th>
                        <th class="size-30 b-right">Value</th>
                        <th class="size-30 b-left">Value</th>
                        <th class="size-20">Property</th>
                    </tr>
                    <tr class="spacecraft-table-row gray-row">
                        <td>Rating</td>
                        <td class="b-right italic">
                            
                            <% if(typeof spacecraftA.ratingSum !== 'undefined' && typeof spacecraftA.ratingAmount !== 'undefined') { %>

                                <%= spacecraftA.ratingSum / spacecraftA.ratingAmount %>

                            <% }else{ %>
                                none
                            <% } %>
                            
                        </td>
                        <td class="b-left italic">

                            <% if(typeof spacecraftB.ratingSum !== 'undefined' && typeof spacecraftB.ratingAmount !== 'undefined') { %>
                                
                                <%= spacecraftB.ratingSum / spacecraftB.ratingAmount %>

                            <% }else{ %>
                                none
                            <% } %>
                            
                        </td>
                        <td>Rating</td>
                    </tr>
                    <tr class="spacecraft-table-row gray-row">
                        <td>Author</td>
                        <td class="b-right italic">@<%= spacecraftA.authorName %></td>
                        <td class="b-left italic">@<%= spacecraftB.authorName %></td>
                        <td>Author</td>
                    </tr>
                    <tr class="spacecraft-table-row gray-row">
                        <td>Manufacturer</td>
                        <td class="b-right italic"><%= spacecraftA.manufacturer %></td>
                        <td class="b-left italic"><%= spacecraftB.manufacturer %></td>
                        <td>Manufacturer</td>
                    </tr>
                    <tr class="spacecraft-table-row gray-row">
                        <td>Price</td>
                        <td class="b-right italic">$<%= spacecraftA.price %></td>
                        <td class="b-left italic">$<%= spacecraftB.price %></td>
                        <td>Price</td>
                    </tr>
                    <tr class="spacecraft-table-row gray-row">
                        <td>Passengers</td>
                        <td class="b-right italic"><%= spacecraftA.passengers %> person</td>
                        <td class="b-left italic"><%= spacecraftB.passengers %> person</td>
                        <td>Passengers</td>
                    </tr>
                    <tr class="spacecraft-table-row gray-row">
                        <td>Type</td>
                        <td class="b-right italic"><%= spacecraftA.type %></td>
                        <td class="b-left italic"><%= spacecraftB.type %></td>
                        <td>Type</td>
                    </tr>
                    <tr class="spacecraft-table-row gray-row">
                        <td>Length</td>
                        <td class="b-right italic"><%= spacecraftA.length %> m</td>
                        <td class="b-left italic"><%= spacecraftB.length %> m</td>
                        <td>Length</td>
                    </tr>
                    <tr class="spacecraft-table-row gray-row">
                        <td>Width</td>
                        <td class="b-right italic"><%= spacecraftA.width %> m</td>
                        <td class="b-left italic"><%= spacecraftB.width %> m</td>
                        <td>Width</td>
                    </tr>
                    <tr class="spacecraft-table-row gray-row">
                        <td>Engine</td>
                        <td class="b-right italic"><%= spacecraftA.engine %></td>
                        <td class="b-left italic"><%= spacecraftB.engine %></td>
                        <td>Engine</td>
                    </tr>
                    <tr class="spacecraft-table-row gray-row">
                        <td>Hyperdrive</td>
                        <td class="b-right italic"><%= spacecraftA.hyperdrive %></td>
                        <td class="b-left italic"><%= spacecraftB.hyperdrive %></td>
                        <td>Hyperdrive</td>
                    </tr>
                    <tr class="spacecraft-table-row gray-row">
                        <td>Cargo</td>
                        <td class="b-right italic"><%= spacecraftA.cargoCapacity %> kg</td>
                        <td class="b-left italic"><%= spacecraftB.cargoCapacity %> kg</td>
                        <td>Cargo</td>
                    </tr>
                    <tr class="spacecraft-table-row gray-row">
                        <td>Maximum speed</td>
                        <td class="b-right italic"><%= spacecraftA.maxSpeed %> km/h</td>
                        <td class="b-left italic"><%= spacecraftB.maxSpeed %> km/h</td>
                        <td>Maximum speed</td>
                    </tr>
                </table>
            </div>
            <div class="col-6">
                <div class="comments">
                    <% if(typeof spacecraftA.comments !== 'undefined' && spacecraftA.comments.length > 0) {%>
                    
                        <% for(key in spacecraftA.comments) { let comment = spacecraftA.comments[key];%>
    
                            <div class="comment">
                                <h3 class="comment-title">
                                    <%= comment.title %> 
                                </h3>
                                <p><%= comment.text %></p>
                                <h4 class="comment-date"><%= comment.date.toLocaleString('hu-HU', 'medium') %></h4>
                            </div>
    
                        <% } %>  
    
                    <% } else{ %>
    
                        <div class="error-message">
                            <p class="cyan">There are no comments for this spacecraft. Yet!</p>
                        </div>
    
                    <% } %> 

                </div>
            </div>
            <div class="col-6">
                <div class="comments">
                    <% if(typeof spacecraftB.comments !== 'undefined' && spacecraftB.comments.length > 0) {%>
                    
                        <% for(key in spacecraftB.comments) { let comment = spacecraftB.comments[key];%>
    
                            <div class="comment">
                                <h3 class="comment-title">
                                    <%= comment.title %> 
                                </h3>
                                <p><%= comment.text %></p>
                                <h4 class="comment-date"><%= comment.date.toLocaleString('hu-HU', 'medium') %></h4>
                            </div>
    
                        <% } %>  
    
                    <% } else{ %>
    
                        <div class="error-message">
                            <p class="cyan">There are no comments for this spacecraft. Yet!</p>
                        </div>
    
                    <% } %> 
                </div>
            </div>
        </div>

        <div id="modal-container" class="hidden">
            <span id="modal-close">
                <img src="/assets/x.png">
            </span>
            <img id="modal-content">
        </div>

    </div>
</main>

<%- include('footer') %> 

<script src="/js/modal.js"></script>
<script src="/js/userops.js"></script>

<%- include('closing') %>
